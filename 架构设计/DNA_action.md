好的，这是一个绝佳的讨论点，也是你架构设计的基石。将所有复杂的分子克隆方法论，拆解成一套有限的、标准化的、如同计算机指令集一样的“**DNA操作原语**”，是实现自动化规划的核心。

我们来系统性地整理和扩展这个“原语指令集”。我会将它们分类，并为每个原语定义其核心的**输入（Inputs）**、**输出（Outputs）**和**关键参数（Parameters）**，这对于后续构建`Planner`至关重要。

---

### DNA操作原语指令集 (Instruction Set for DNA Manipulation)

#### 类别一：序列生成与扩增 (Generation & Amplification)
*这些原语用于从无到有或从模板创造出DNA序列。*

1.  **化学合成 (Chemical Synthesis)**
    *   **描述**: 从数字序列信息（如`'ATGC...'`）直接合成出物理的单链或双链DNA片段。
    *   **输入**: `DigitalSequence` (字符串)
    *   **输出**: `Molecule` (物理的、线性的ssDNA或dsDNA)
    *   **关键参数**: 长度、纯度、错误率、成本。
    *   **在架构中的角色**: “万物的起源”，将数字设计变为物理实体。

2.  **聚合酶链式反应 (PCR - Polymerase Chain Reaction)**
    *   **描述**: 对一个模板DNA中的特定区域进行指数级扩增。
    *   **输入**: `Molecule` (模板), `Oligo` (正向引物), `Oligo` (反向引物)
    *   **输出**: `Molecule` (大量的、线性的、双链的扩增产物Amplicon)
    *   **关键参数**: 退火温度(Tm)、延伸时间、保真度（高保真/Taq）。
    *   **在架构中的角色**: “复印机”，克隆和提取基因片段的主力。

3.  **逆转录 (Reverse Transcription)**
    *   **描述**: 以RNA为模板，合成出其互补的DNA链（cDNA）。
    *   **输入**: `Molecule` (RNA模板), `Oligo` (引物，如Oligo-dT或随机引物)
    *   **输出**: `Molecule` (线性的、单链或双链的cDNA)
    *   **在架构中的角色**: “翻译官”，打通RNA世界和DNA世界的桥梁，常用于从mRNA克隆基因。

---

#### 类别二：切割与线性化 (Cleavage & Linearization)
*这些原语用于切割DNA，为后续的组装做准备。*

4.  **限制性内切酶消化 (Restriction Digestion)**
    *   **描述**: 使用限制性内切酶在DNA的特定识别位点进行切割。
    *   **输入**: `Molecule` (待切割DNA), `EnzymeList` (一个或多个酶)
    *   **输出**: `Set<Molecule>` (一个包含多个DNA片段的集合)
    *   **关键参数**: 酶的名称、识别序列、产生的末端类型（粘性/平末端）、Buffer兼容性。
    *   **在架构中的角色**: “精确的手术刀”，用于打开载体或切下片段。

---

#### 类别三：连接与组装 (Joining & Assembly)
*这些原语用于将不同的DNA片段拼接在一起。*

5.  **粘性/平末端连接 (Ligation)**
    *   **描述**: 使用DNA连接酶（如T4 Ligase）将具有兼容末端的DNA片段通过磷酸二酯键连接起来。
    *   **输入**: `Set<Molecule>` (一个包含两个或多个片段的集合)
    *   **输出**: `Molecule` (一个拼接好的新分子)
    *   **关键参数**: 末端兼容性（如EcoRI-EcoRI, Blunt-Blunt）、是否需要去磷酸化来防止自连。
    *   **在架构中的角色**: “胶水”，传统的、依赖末端兼容性的拼接方法。

6.  **同源重组组装 (Homology-Based Assembly)**
    *   **描述**: 利用片段末端的同源序列（Homology Arms），在体外通过酶混合物（包含外切酶、聚合酶、连接酶）将多个片段无缝拼接。这是Gibson Assembly, CPEC等方法的抽象。
    *   **输入**: `Set<Molecule>` (一个包含两个或多个、末端带同源臂的线性片段的集合)
    *   **输出**: `Molecule` (一个无缝拼接好的新分子，通常是环状)
    *   **关键参数**: 同源臂的长度和Tm值、片段数量。
    *   **在架构中的角色**: “无缝焊接机”，现代、灵活、不依赖酶切位点的拼接方法。

7.  **寡核苷酸退火 (Oligo Annealing)**
    *   **描述**: 将两条互补的单链Oligo退火，形成一小段双链DNA。
    *   **输入**: `Oligo` (正向单链), `Oligo` (反向单链)
    *   **输出**: `Molecule` (一个短的、线性的、双链DNA片段)
    *   **在架构中的角色**: 用于制作小的连接子（Linker）或者适配器（Adapter）。

---

#### 类别四：末端修饰与状态改变 (End Modification & State Change)
*这些是辅助性的“微操作”，用于改变DNA片段的状态，以满足其他原语的前置条件。*

8.  **末端修复/平末端化 (End Repair / Blunting)**
    *   **描述**: 使用聚合酶的5'→3'聚合酶活性和3'→5'外切酶活性，将粘性末端（突出或凹陷）修复为平末端。
    *   **输入**: `Molecule` (带粘性末端的线性DNA)
    *   **输出**: `Molecule` (带平末端的同一个DNA)
    *   **在架构中的角色**: “打磨机”，让不同来源的片段能通过平末端连接。

9.  **磷酸化 (Phosphorylation)**
    *   **描述**: 使用激酶（如T4 PNK）在DNA的5'端加上一个磷酸基团。
    *   **输入**: `Molecule` (5'端无磷酸的DNA，如普通PCR产物)
    *   **输出**: `Molecule` (5'端有磷酸的同一个DNA)
    *   **在架构中的角色**: “激活器”，为`Ligation`原语提供必需的化学基团。

10. **去磷酸化 (Dephosphorylation)**
    *   **描述**: 使用磷酸酶（如CIP, SAP）去除DNA 5'端的磷酸基团。
    *   **输入**: `Molecule` (如被单一酶切线性化的载体)
    *   **输出**: `Molecule` (5'端无磷酸的同一个DNA)
    *   **在架构中的角色**: “保险丝”，防止载体自我环化，极大提高连接效率。

11. **加A尾 (A-Tailing)**
    *   **描述**: 使用非高保真的聚合酶（如Taq酶）在平末端PCR产物的3'端加上一个腺嘌呤（A）。
    *   **输入**: `Molecule` (平末端的线性DNA)
    *   **输出**: `Molecule` (3'端有单A突出的同一个DNA)
    *   **在架构中的角色**: “接头转换器”，为TA克隆（一种特殊的Ligation）做准备。

---

### 总结与架构意义

你提出的这套“原语”思想非常关键。通过将所有实验操作抽象化，我们实现了：

1.  **方法论的解耦**：一个复杂的“Gibson Assembly克隆”，在你的架构里不再是一个黑盒子，而被清晰地解构为 `[PCR, PCR, Homology-Based Assembly]` 这一系列原语的组合。一个“双酶切克隆”则是 `[Digest, Digest, Ligation, Dephosphorylation]` 的组合。
2.  **规划的基础**：你的`Planner`（无论是基于规则、搜索还是LLM Agent）的工作，就是在这个“原语指令集”中，寻找一条从`Initial State`（初始材料）到`Goal State`（目标产物）的有效路径。
3.  **无限的组合创新**：`Planner`不再局限于教科书上的固定方法。它有可能发现新的、非传统的组合，比如 `[Digest, PCR, Homology-Based Assembly]` 这种混合路径，来解决一些困难的克隆问题。

这套精心定义的原语，就是你构建的“分子克隆自动化语言”的全部词汇。有了这些词汇，你的`Planner`才能开始“遣词造句”，谱写出优雅而高效的实验方案。